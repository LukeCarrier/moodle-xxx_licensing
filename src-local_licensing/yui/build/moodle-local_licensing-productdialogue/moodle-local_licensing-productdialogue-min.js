YUI.add("moodle-local_licensing-productdialogue",function(e,t){e.namespace("Moodle.local_licensing.productdialogue"),M.local_licensing=M.local_licensing||{};var n=function(e){e.center=!0,e.draggable=!0,e.modal=!0,e.visible=!1,n.superclass.constructor.apply(this,[e])};n.NAME=t,n.ATTRS={ajaxurl:{},type:{}},e.extend(n,M.core.dialogue,{initializer:function(t){var n=e.Node.create("<p>Body text goes here</p>"),r=e.Node.create("<h1>"+this.selectString()+"</h1>");this.setDialogueContent(n,r),this.setupForm(),this.setupEvents()},handleQueryChange:function(t){console.log(query),e.io(M.cfg.wwwroot+this.get("ajaxurl"),{context:this,on:{complete:this.updateProductsList}})},selectString:function(){return this.string("selectxs",this.typeString())},setDialogueContent:function(t,n){this.setStdModContent(e.WidgetStdMod.BODY,t,e.WidgetStdMod.REPLACE),this.setStdModContent(e.WidgetStdMod.HEADER,n,e.WidgetStdMod.REPLACE)},setupEvents:function(){},setupForm:function(){var t=this.get("type"),n=e.one("#fitem_id_products"+t),r=n.one("#id_products"+t),i=e.Node.create('<button id="licensing_'+t+'">'+this.selectString()+"</button>");n.append(i),r.hide(),i.on("click",function(e){this.show(),e.preventDefault(),e.stopPropagation()},this)},string:function(e,t,n){return typeof n=="undefined"&&(n="local_licensing"),M.util.get_string(e,n,t)},typeString:function(){return this.string("productset:products:"+this.get("type"))},updateProductsList:function(t,n,r){console.log(t,n,r);try{var i=e.JSON.parse(outcome.responseText);i.error?new M.core.ajaxException(i):this.setCohorts(i.response)}catch(s){return new M.core.exception(s)}}}),e.Moodle.local_licensing.productdialogue=n,M.local_licensing.init_product_dialogue=function(e){return new n(e)}},"@VERSION@",{requires:["base","event","handlebars","moodle-core-notification-dialogue","node"]});
